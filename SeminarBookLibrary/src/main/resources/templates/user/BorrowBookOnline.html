<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
    layout:decorate="~{layout/userLayout.html}">

<head>
    <title>Library</title>
</head>

<body>
    <content layout:fragment="content">
        <div class="row text-center mt-2 mb-2">
            <div class="col text-uppercase">
                <h1 class="font-weight-bold h1">BORROW BOOK ONLINE</h1>
            </div>
        </div>
        <div class="row mt-2 mb-2">
            <div class="col-6">
                <div class="row">
                    <div class="col text-uppercase">
                        <h4 class="font-weight-bold h4">Book INFO</h4>
                    </div>
                </div>
                <div class="row mt-2 mb-2">
                    <div class="col-12 ">
                        <table class="table align-middle mb-0 bg-white">
                            <thead class="bg-light">
                                <tr>
                                    <th>Image</th>
                                    <th>Name</th>
                                    <th>Author</th>
                                    <th>Action</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr th:if="${booksBorrow!=null}" th:each="book:${booksBorrow}">
                                    <td>
                                        <img class="img-fluid w-25 border-0" th:src="@{/data/}+${book.imgBook}" alt="">
                                    </td>
                                    <td>
                                        <p class="fw-normal mb-1" th:text="${book.titleBook}"></p>
                                    </td>
                                    <td>
                                        <p class="fw-normal mb-1" th:text="${book.authorBook}"></p>
                                    </td>
                                    <td>
                                        <a th:href="@{'/deleteBookBorrow/'+${book.idBook}}"><button type="button"
                                                class="btn btn-danger me-1">Delete</button></a>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
            <div class="col-6">
                <div class="row">
                    <div class="col text-uppercase">
                        <h4 class="font-weight-bold h4">Profile</h4>
                    </div>
                </div>
                <div th:if="${user==null}" class="alert alert-warning" role="alert">
                    <h4 class="alert-heading">Hello</h4>
                    <p>You need to login to borrow.</p>
                </div>  
                <form th:if="${user!=null}" th:action="@{/submitBorrow}" method="post" class="needs-validation" th:object="${user}"
                    novalidate>
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <label for="validationCustom01">Name</label>
                            <input type="text" class="form-control" id="validationCustom01" placeholder="Name" required
                                th:field="*{nameUser}">
                            <div class="valid-feedback">
                                Looks good!
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <label for="validationCustom02">Phone</label>
                            <input type="text" class="form-control" id="validationCustom02" placeholder="Phone" required
                                th:field="*{phoneUser}">
                            <div class="valid-feedback">
                                Looks good!
                            </div>
                        </div>
                    </div>
                    <div class="buttonHandle my-3">
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </div>
                    <script>
                        // Example starter JavaScript for disabling form submissions if there are invalid fields
                        (function () {
                            'use strict';
                            window.addEventListener('load', function () {
                                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                                var forms = document.getElementsByClassName('needs-validation');
                                // Loop over them and prevent submission
                                var validation = Array.prototype.filter.call(forms, function (form) {
                                    form.addEventListener('submit', function (event) {
                                        if (form.checkValidity() === false) {
                                            event.preventDefault();
                                            event.stopPropagation();
                                        }
                                        form.classList.add('was-validated');
                                    }, false);
                                });
                            }, false);
                        })();
                    </script>
                </form>
            </div>
        </div>

    </content>
</body>

</html>